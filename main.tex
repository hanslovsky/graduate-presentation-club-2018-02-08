\documentclass[aspectratio=169,table]{beamer}

\usepackage{graphicx}
\usepackage{import}
\usepackage{media9}
\usepackage{multimedia}
\usepackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%
\newcommand{\gcmark}{{\color{green}\cmark}}%
\newcommand{\ycmark}{{\color{yellow}\cmark}}%
\newcommand{\rxmark}{{\color{red}\xmark}}%
\usepackage{tikz}

\usetikzlibrary{3d}
\usetikzlibrary{backgrounds}
\usetikzlibrary{decorations.pathreplacing}
\usetikzlibrary{fit}
% \usetikzlibrary{external}
\usetikzlibrary{matrix}
\usetikzlibrary{positioning}
\usetikzlibrary{scopes} % brilliant library!

% \tikzexternalize

\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}


\usetheme{Janelia}

\title[Janelia Theme]{The Metamorphosis of BigCAT --- Toward Streamlined Proofreading}
\subtitle{Toward Streamlined Proofreading}
% \subtitle{A custom modern minimalist Beamer theme designed from scratch}
\author{Philipp Hanslovsky}
\date{February 8, 2018}

\setcounter{showSlideNumbers}{1}

\begin{document}

\setcounter{showProgressBar}{0}
\setcounter{showSlideNumbers}{0}

\frame{\titlepage}

\begin{frame}
    \frametitle{Circuit Reconstruction}
    \only<1>{
        \begin{tikzpicture}
            \node[anchor=south west] (diagram) {\includegraphics[width=0.6\textwidth]{fig/circuit-diagram.pdf}};
            \node[anchor=north,font=\tiny] at (diagram.south) {https://upload.wikimedia.org/wikipedia/commons/7/76/4\_bit\_counter.svg};%% https://upload.wikimedia.org/wikipedia/commons/7/76/4_bit_counter.svg};
            % \begin{scope}[x={(diagram.south east)},y={(diagram.north west)}]
            %     \visible<2->{
            %     \draw[red] (0.5,0.2) ellipse (2mm and 5mm);
            % }
            % \end{scope}
        \end{tikzpicture}
    }
    \only<2>{
        \begin{tikzpicture}
            \node[] (neuron) {\includegraphics[width=0.4\linewidth]{fig/neuron.png}};
            \node[anchor=north,font=\tiny] at (neuron.south) {https://www.wikipedia.org/};
            % https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Neuron_Hand-tuned.svg/400px-Neuron_Hand-tuned.svg.png
            \node[anchor=north west] (synapse) at ([xshift=50]neuron.north east) {\includegraphics[width=0.2\linewidth]{fig/synapse.png}};
            \node[anchor=north,font=\tiny] at (synapse.south) {https://psychlopedia.wikispaces.com};
            % https://psychlopedia.wikispaces.com/file/view/syn.gif/325862020/syn.gif
        \end{tikzpicture}
    }
\end{frame}

\begin{frame}
    \frametitle{Automatic Reconstruction}
    \begin{tikzpicture}
        \node[anchor=south west] (pipeline) {\includegraphics{fig/reconstruction-pipeline.pdf}};
        \begin{scope}[x={(pipeline.south east)},y={(pipeline.north west)}]
            \visible<2->{
                \node[red,ultra thick] (ml) at (0.5,-0.2) {Machine Learning};
                \draw[red,ultra thick] (0.22,0.5) ellipse (0.07 and 0.25);
                \draw[thick,red] (ml.west) edge [->,out=180,in=270] (0.22, 0.2);
            }
            \visible<3->{
                \draw[red,ultra thick] (0.77,0.5) ellipse (0.07 and 0.25);
                \draw[thick,red] (ml.east) edge [->,out=0,in=270] (0.77, 0.2);
            }
        \end{scope}
    \end{tikzpicture}

    \vfill
    \visible<1->{
        \tiny
        Funke \emph{et al.} ``A deep structured learning approach toward automating connectome reconstruction from 3D electron micrographs'' (2017). arXiv 1709.0297
    }
\end{frame}


\begin{frame}
    \frametitle{CREMI}
    \only<1>{
        \begin{tikzpicture}[remember picture,overlay]
            \node[] at (current page.center) {\includegraphics[width=\paperwidth]{fig/cremi.png}};
        \end{tikzpicture}
    }

    \only<2>{
        \vspace{1cm}
        \includegraphics[width=\columnwidth]{fig/challenge-pixels-2.pdf}
    }

    \begin{textblock}{3}(11.4,0)
        \tiny\includegraphics[width=1cm]{fig/people/funke.png}
        
        J. Funke%
    \end{textblock}%
    
    \begin{textblock}{3}(12.6,0)
        \tiny\includegraphics[width=1cm]{fig/people/bock.jpeg}
        
        D. Bock%
    \end{textblock}%
    
    \begin{textblock}{3}(13.8,0)
        \tiny\includegraphics[width=1cm]{fig/people/perlman.jpeg}
        
        E. Perlman%
    \end{textblock}%
    
    \begin{textblock}{3}(15,0)
        \tiny\includegraphics[width=1cm]{fig/people/turaga.jpg}
        
        S. Turaga%
    \end{textblock}%
    
    \begin{textblock}{3}(0.5,14)
        {\color{white}\Huge\bf cremi.org}
    \end{textblock}
\end{frame}


\begin{frame}
    \frametitle{BigCAT}
    % \begin{itemize}
    %       \item Arbitrary Re-Slicing
    %       \item Painting (!!)
    %       \item Agglomeration
    %       \item Annotations
    %       \item Potential for heavy workload tasks on client
    % \end{itemize}

    \begin{tikzpicture}[overlay]
        \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        \coordinate (width) at (\the\paperwidth,\the\paperheight);
        \fill[black,anchor=west,inner sep=0] ($(0,0)-(width)$) rectangle (\the\paperwidth,\the\paperheight);
    \end{tikzpicture}%
    
    \def\factor{1.0}
    \movie[%
    width=\factor\textwidth,%
    height=\factor\textheight,%
    ]{\includegraphics[width=\factor\textwidth]{vid/bigcat-cremi-placeholder.jpg}}{vid/bigcat-cremi-b-aligned.mov}
\end{frame}

\begin{frame}
    \frametitle{Required Features}
    \small
    \vspace{1cm}
    \begin{table}
        \centering
        \begin{tabular}{lccc}
          \visible<1->{                             & BigCAT & Neuroglancer & BigCAT v2 \\}                       
          \visible<2->{Arbitrary cross-sections     & \gcmark & \gcmark & \gcmark \\}                             
          \visible<3->{Orthogonal views             & \rxmark & \gcmark & \gcmark \\}                             
          \visible<4->{3D visualization             & \rxmark & \gcmark & \gcmark \\}                             
          \visible<5->{3D model generation          & \rxmark & \rxmark & \gcmark \\}                             
          \visible<6->{Painting                     & \gcmark & \rxmark & \gcmark \\}                             
          \visible<7->{Multi-resolution painting         & \rxmark & \rxmark & \gcmark \\}                             
          \visible<8->{Semi-automatic agglomeration & \rxmark & \rxmark & \gcmark \\}                             
          \visible<9->{Extensibility                & \rxmark & \only<9>{\gcmark}\only<10->{\ycmark} & \gcmark \\}
        \end{tabular}
    \end{table}
    \visible<10>{
        \begin{tikzpicture}[overlay]
            \node[draw=black] at (10cm,0cm) {\includegraphics[width=3cm]{fig/chrome-heap-limit.png}};
        \end{tikzpicture}
    }
\end{frame}

\begin{frame}
    \frametitle{Agglomeration}
    \small
    \vspace{1cm}
    \begin{table}
        \centering
        \begin{tabular}{lccc}
                                       & BigCAT & Neuroglancer & BigCAT v2 \\
          Arbitrary cross-sections     & \gcmark & \gcmark & \gcmark \\
          Orthogonal views             & \rxmark & \gcmark & \gcmark \\ 
          3D visualization             & \rxmark & \gcmark & \gcmark \\ 
          3D model generation          & \rxmark & \rxmark & \gcmark \\ 
          Painting                     & \gcmark & \rxmark & \gcmark \\ 
          Multi-resolution painting         & \rxmark & \rxmark & \gcmark \\ 
          \rowcolor{black!20} Semi-automatic agglomeration & \rxmark & \rxmark & \gcmark \\ 
          Extensibility                & \rxmark & \ycmark & \gcmark \\
        \end{tabular}
    \end{table}
\end{frame}

\begin{frame}
    \frametitle{Agglomeration}

    \begin{tikzpicture}[overlay]
        \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        \coordinate (width) at (\the\paperwidth,\the\paperheight);
        \fill[black,anchor=west,inner sep=0] ($(0,0)-(width)$) rectangle (\the\paperwidth,\the\paperheight);
    \end{tikzpicture}%
    
    \def\factor{1.0}
    \movie[%
    width=\factor\textwidth,%
    height=\factor\textheight,%
    ]{}{vid/assignments.mp4}
    % ]{\includegraphics[width=\factor\textwidth]{vid/assignments-placeholder.jpg}}{vid/assignments.mp4}
    % show video
    % backend: c9ae08b
    % bigcat:  e84388e
    % start with fragment 2660 (blue)
\end{frame}

\begin{frame}
    \frametitle{Multi-Resolution Painting}
    \small
    \vspace{1cm}
    \begin{table}
        \centering
        \begin{tabular}{lccc}
                                       & BigCAT & Neuroglancer & BigCAT v2 \\
          Arbitrary cross-sections     & \gcmark & \gcmark & \gcmark \\
          Orthogonal views             & \rxmark & \gcmark & \gcmark \\ 
          3D visualization             & \rxmark & \gcmark & \gcmark \\ 
          3D model generation          & \rxmark & \rxmark & \gcmark \\ 
          \rowcolor{black!20} Painting                     & \gcmark & \rxmark & \gcmark \\ 
          \rowcolor{black!20} Multi-resolution painting         & \rxmark & \rxmark & \gcmark \\ 
          Semi-automatic agglomeration & \rxmark & \rxmark & \gcmark \\ 
          Extensibility                & \rxmark & \ycmark & \gcmark \\
        \end{tabular}
    \end{table}
\end{frame}

\begin{frame}
    \frametitle{Multi-Resolution Painting}

    \begin{tikzpicture}[overlay]
        \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        \coordinate (width) at (\the\paperwidth,\the\paperheight);
        \fill[black,anchor=west,inner sep=0] ($(0,0)-(width)$) rectangle (\the\paperwidth,\the\paperheight);
    \end{tikzpicture}%

    \def\factor{1.0}
    \movie[%
    width=\factor\textwidth,%
    height=\factor\textheight,%
    ]{}{vid/paint.mp4}
    % ]{\includegraphics[width=\factor\textwidth]{vid/paint-placeholder.jpg}}{vid/paint.mp4}
\end{frame}

%     \def\colorOne{red}
%     \def\colorTwo{blue}
%     \def\colorThree{yellow}
%     \def\colorFour{green}
%     \def\colorFive{magenta}
%     \def\cellSize{1.4em}
% \begin{frame}
%     \frametitle{Painting}
%     \subimport{fig/}{paint}
% \end{frame}

% \begin{frame}
%     \frametitle{Multi-Resolution Painting}
%     \subimport{fig/}{paint-continued}
% \end{frame}

\begin{frame}
    \frametitle{3D Model Generation}
    \small
    \vspace{1cm}
    \begin{table}
        \centering
        \begin{tabular}{lccc}
                                       & BigCAT & Neuroglancer & BigCAT v2 \\
          Arbitrary cross-sections     & \gcmark & \gcmark & \gcmark \\
          Orthogonal views             & \rxmark & \gcmark & \gcmark \\ 
          3D visualization             & \rxmark & \gcmark & \gcmark \\ 
          \rowcolor{black!20}  3D model generation          & \rxmark & \rxmark & \gcmark \\ 
          Painting                     & \gcmark & \rxmark & \gcmark \\ 
          Multi-resolution painting         & \rxmark & \rxmark & \gcmark \\ 
          Semi-automatic agglomeration & \rxmark & \rxmark & \gcmark \\ 
          Extensibility                & \rxmark & \ycmark & \gcmark \\
        \end{tabular}
    \end{table}
\end{frame}
\begin{frame}
    \frametitle{Mesh Generation}
    \begin{tikzpicture}[overlay]
        \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        \coordinate (width) at (\the\paperwidth,\the\paperheight);
        \fill[black,anchor=west,inner sep=0] ($(0,0)-(width)$) rectangle (\the\paperwidth,\the\paperheight);
    \end{tikzpicture}%

    \def\factor{1.0}
    \movie[%
    width=\factor\textwidth,%
    height=\factor\textheight,%
    ]{}{vid/mesh.mp4}
\end{frame}

% \begin{frame}
%     \frametitle{Mesh Generation}
%     \centering
%     \vspace{3em}
%     \subimport{fig/}{mesh-cache}
% \end{frame}

\begin{frame}
    \frametitle{Extensibility}
    \small
    \vspace{1cm}
    \begin{table}
        \centering
        \begin{tabular}{lccc}
                                       & BigCAT & Neuroglancer & BigCAT v2 \\
          Arbitrary cross-sections     & \gcmark & \gcmark & \gcmark \\
          Orthogonal views             & \rxmark & \gcmark & \gcmark \\ 
          3D visualization             & \rxmark & \gcmark & \gcmark \\ 
          3D model generation          & \rxmark & \rxmark & \gcmark \\ 
          Painting                     & \gcmark & \rxmark & \gcmark \\ 
          Multi-resolution painting         & \rxmark & \rxmark & \gcmark \\ 
          Semi-automatic agglomeration & \rxmark & \rxmark & \gcmark \\ 
          \rowcolor{black!20}  Extensibility                & \rxmark & \ycmark & \gcmark \\
        \end{tabular}
    \end{table}
\end{frame}
\begin{frame}
    \frametitle{Cool Hacks}
    \begin{tikzpicture}[overlay]
        \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
        \coordinate (width) at (\the\paperwidth,\the\paperheight);
        \fill[black,anchor=west,inner sep=0] ($(0,0)-(width)$) rectangle (\the\paperwidth,\the\paperheight);
    \end{tikzpicture}%

    \def\factor{1.0}
    \movie[%
    width=\factor\textwidth,%
    height=\factor\textheight,%
    ]{}{vid/bigcat-synapses.mp4}
\end{frame}

\begin{frame}
    \frametitle{Name}
    tbd
    BigCAT may be known under a different name in the future:
    https://github.com/saalfeldlab/bigcat/issues/23
\end{frame}

% \begin{frame}
%     \frametitle{Links}
%     \begin{itemize}
%           \item[BigCAT] 
%     \end{itemize}
% \end{frame}

% \begin{frame}
%     \frametitle{Acknowledgements}
%     tbd
%     \begin{itemize}
%           \item Saalfeld lab
%           \item Tobias
%           \item Jan, Vanessa
%     \end{itemize}
% \end{frame}

    



\end{document}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
